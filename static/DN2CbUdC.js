import{ap as z,ay as p,r as C,R as T,a2 as L,S,a3 as U,O as k,ar as E,c as $,j,N as x,aq as F,C as H,az as m,aA as M,L as N,aB as V,B as I}from"./BHKbtcID.js";const K=t=>t==="defer"||t===!1;function G(...t){var w;const r=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(r);let[s,n,a={}]=t;if(typeof s!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof n!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const e=z(),l=n,d=()=>p.value,P=()=>e.isHydrating?e.payload.data[s]:e.static.data[s];a.server=a.server??!0,a.default=a.default??d,a.getCachedData=a.getCachedData??P,a.lazy=a.lazy??!1,a.immediate=a.immediate??!0,a.deep=a.deep??p.deep,a.dedupe=a.dedupe??"cancel";const y=a.getCachedData(s,e),_=y!=null;if(!e._asyncData[s]||!a.immediate){(w=e.payload._errors)[s]??(w[s]=p.errorValue);const c=a.deep?C:T;e._asyncData[s]={data:c(_?y:a.default()),pending:C(!_),error:L(e.payload._errors,s),status:C("idle"),_default:a.default}}const o={...e._asyncData[s]};delete o._default,o.refresh=o.execute=(c={})=>{if(e._asyncDataPromises[s]){if(K(c.dedupe??a.dedupe))return e._asyncDataPromises[s];e._asyncDataPromises[s].cancelled=!0}if(c._initial||e.isHydrating&&c._initial!==!1){const u=c._initial?y:a.getCachedData(s,e);if(u!=null)return Promise.resolve(u)}o.pending.value=!0,o.status.value="pending";const f=new Promise((u,i)=>{try{u(l(e))}catch(v){i(v)}}).then(async u=>{if(f.cancelled)return e._asyncDataPromises[s];let i=u;a.transform&&(i=await a.transform(u)),a.pick&&(i=W(i,a.pick)),e.payload.data[s]=i,o.data.value=i,o.error.value=p.errorValue,o.status.value="success"}).catch(u=>{if(f.cancelled)return e._asyncDataPromises[s];o.error.value=$(u),o.data.value=j(a.default()),o.status.value="error"}).finally(()=>{f.cancelled||(o.pending.value=!1,delete e._asyncDataPromises[s])});return e._asyncDataPromises[s]=f,e._asyncDataPromises[s]},o.clear=()=>Q(e,s);const D=()=>o.refresh({_initial:!0}),g=a.server!==!1&&e.payload.serverRendered;{const c=x();if(c&&!c._nuxtOnBeforeMountCbs){c._nuxtOnBeforeMountCbs=[];const i=c._nuxtOnBeforeMountCbs;S(()=>{i.forEach(v=>{v()}),i.splice(0,i.length)}),U(()=>i.splice(0,i.length))}g&&e.isHydrating&&(o.error.value||y!=null)?(o.pending.value=!1,o.status.value=o.error.value?"error":"success"):c&&(e.payload.serverRendered&&e.isHydrating||a.lazy)&&a.immediate?c._nuxtOnBeforeMountCbs.push(D):a.immediate&&D();const f=F();if(a.watch){const i=k(a.watch,()=>o.refresh());f&&E(i)}const u=e.hook("app:data:refresh",async i=>{(!i||i.includes(s))&&await o.refresh()});f&&E(u)}const b=Promise.resolve(e._asyncDataPromises[s]).then(()=>o);return Object.assign(b,o),b}function Q(t,r){r in t.payload.data&&(t.payload.data[r]=void 0),r in t.payload._errors&&(t.payload._errors[r]=p.errorValue),t._asyncData[r]&&(t._asyncData[r].data.value=void 0,t._asyncData[r].error.value=p.errorValue,t._asyncData[r].pending.value=!1,t._asyncData[r].status.value="idle"),r in t._asyncDataPromises&&(t._asyncDataPromises[r]&&(t._asyncDataPromises[r].cancelled=!0),t._asyncDataPromises[r]=void 0)}function W(t,r){const s={};for(const n of r)s[n]=t[n];return s}function Y(t,r,s){const[n={},a]=typeof r=="string"?[{},r]:[r,s],e=H(()=>m(t)),l=n.key||M([a,typeof e.value=="string"?e.value:"",...J(n)]);if(!l||typeof l!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+l);if(!t)throw new Error("[nuxt] [useFetch] request is missing.");const d=l===a?"$f"+l:l;if(!n.baseURL&&typeof e.value=="string"&&e.value[0]==="/"&&e.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:P,lazy:y,default:_,transform:o,pick:D,watch:g,immediate:b,getCachedData:w,deep:c,dedupe:f,...u}=n,i=N({...V,...u,cache:typeof n.cache=="boolean"?void 0:n.cache}),v={server:P,lazy:y,default:_,transform:o,pick:D,immediate:b,getCachedData:w,deep:c,dedupe:f,watch:g===!1?[]:[i,e,...g||[]]};let h;return G(d,()=>{var q;(q=h==null?void 0:h.abort)==null||q.call(h,"Request aborted as another request to the same endpoint was initiated."),h=typeof AbortController<"u"?new AbortController:{};const O=m(n.timeout);let R;return O&&(R=setTimeout(()=>h.abort("Request aborted due to timeout."),O),h.signal.onabort=()=>clearTimeout(R)),(n.$fetch||globalThis.$fetch)(e.value,{signal:h.signal,...i}).finally(()=>{clearTimeout(R)})},v)}function J(t){var s;const r=[((s=m(t.method))==null?void 0:s.toUpperCase())||"GET",m(t.baseURL)];for(const n of[t.params||t.query]){const a=m(n);if(!a)continue;const e={};for(const[l,d]of Object.entries(a))e[m(l)]=m(d);r.push(e)}return r}function B(){let t="es";const s=I("user_p_timezone",{maxAge:31536e4,path:"/"});let n={app:"lupacine.com",av:"1",dt:3,did:"",ch:"web",lan:t};return s.value=-(new Date().getTimezoneOffset()/60),s.value!=null&&(n.timezone=s.value),n.sign="3a93533678a4eba2fe966146b8462542",n.did="6lNLbQO1UWOOY1xf7eGr6",n}const ee=(t,r)=>{const s="https://200.looklookmovie188.workers.dev";let n={headers:{}};const a={key:r.key||t,baseURL:s,timeout:15e3,onRequest({options:e,request:l}){let d=B();e.body&&(e.body.language="es-mx",e.body.base=d)},onRequestError({error:e}){},onResponse({response:e}){+e.status==200&&+e._data.code!=0&&alert(e._data.msg)},onResponseError({error:e}){}};return Y(t,{...a,...n,...r},"$SQlhB7w0w2").catch(e=>{})},ae=(t,r)=>{const s="https://200.looklookmovie188.workers.dev";let n={headers:{}};const a={baseURL:s,onRequest({options:e,request:l}){let d=B();e.body?(e.body.language="es-mx",e.body.base=d):e.body={base:d}},onResponse({response:e}){+e.status==200&&+e._data.code!=0&&alert(e._data.msg)},onResponseError(){alert("Ocurrió un error. Inténtalo de nuevo más tarde.")}};return $fetch(t,{...a,...n,...r})};export{ae as a,ee as u};
